(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(26),o=n.n(i),r=(n(66),n(16)),s=n(5),l=n(25),j=n(4),u=n(6),b=n.n(u),d=(n(86),"https://api.themoviedb.org/3/"),h="https://image.tmdb.org/t/p/",O=n(1);var p=function(e){return Object(O.jsx)("div",{children:Object(O.jsx)("div",{style:{width:"100%",height:"500px",background:"url('".concat(e.image,"')"),backgroundSize:"100% cover",position:"relative"},children:Object(O.jsxs)("div",{className:"movie_info",style:{position:"absolute",color:"#fff"},children:[Object(O.jsx)("h2",{style:{color:"#fff"},children:e.title}),Object(O.jsx)("p",{children:e.release}),Object(O.jsx)("p",{children:e.rate}),Object(O.jsx)("p",{children:e.desc})]})})})},f=n(104);var v=function(e){return e.landingpage?Object(O.jsx)(f.a,{lg:6,md:8,xs:24,children:Object(O.jsx)("div",{style:{position:"relative"},children:Object(O.jsx)("a",{href:"/movie/".concat(e.movieId),children:Object(O.jsx)("img",{src:e.image,alt:e.title,style:{width:"100%",height:"100%"}})})})}):Object(O.jsx)(f.a,{lg:6,md:8,xs:24,children:Object(O.jsxs)("div",{style:{position:"relative"},children:[Object(O.jsx)("img",{src:e.image,alt:e.title,style:{width:"100%",height:"100%"}}),Object(O.jsx)("p",{children:e.name}),Object(O.jsx)("p",{children:e.character})]})})},g=n(103),m={loginStatus:!1};var x=Object(s.f)((function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),i=n[0],o=n[1],r=Object(c.useState)(null),s=Object(j.a)(r,2),u=s[0],f=s[1],x=Object(c.useState)(0),y=Object(j.a)(x,2),_=y[0],S=y[1],w=Object(c.useState)(""),k=Object(j.a)(w,2),I=k[0],E=k[1],T="";Object(c.useEffect)((function(){b.a.get("/api/auth").then((function(e){console.log("landing get auth",e),e.data.isAuth?m.loginStatus=!0:m.loginStatus=!1})),b.a.post("/api/movieapi").then((function(e){T=e.data;var t="".concat(d,"movie/popular?api_key=").concat(T,"&language=en-US&page=1");C(t),E(e.data)}))}),[]);var C=function(e){fetch(e).then((function(e){return e.json()})).then((function(e){o([].concat(Object(l.a)(i),Object(l.a)(e.results))),f(e.results[0]),S(e.page)}))};return Object(O.jsxs)("div",{className:"landing_page",children:[Object(O.jsxs)("div",{className:"intro_box",children:[Object(O.jsx)("h2",{children:"Thank you for visiting !"}),Object(O.jsx)("div",{className:"btn_box",children:m.loginStatus?Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(){b.a.get("/api/logout").then((function(t){t.data.success?e.history.push("/login"):alert("failed to logout")}))},children:"LOGOUT"}),Object(O.jsx)("button",{children:Object(O.jsx)("a",{href:"/fav",children:"FAVORITE"})})]}):Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{children:Object(O.jsx)("a",{href:"/register",children:"REGISTER"})}),Object(O.jsx)("button",{children:Object(O.jsx)("a",{href:"/login",children:"LOGIN"})})]})})]}),Object(O.jsx)("div",{className:"movie_box",children:Object(O.jsxs)("div",{className:"latest_movie",children:[u&&Object(O.jsx)(p,{title:u.original_title,rate:u.vote_average,release:u.release_date,desc:u.overview,image:"".concat(h,"w1280").concat(u.backdrop_path)}),Object(O.jsx)("h2",{children:"Moive by Latest"}),Object(O.jsx)(g.a,{gutter:[16,16],children:i&&i.map((function(e,t){return Object(O.jsx)(a.a.Fragment,{children:Object(O.jsx)(v,{landingpage:!0,image:e.poster_path?"".concat(h,"w500").concat(e.poster_path):null,movieId:e.id,title:e.title})},t)}))}),Object(O.jsx)("button",{className:"btn_load",onClick:function(){T=I;var e="".concat(d,"movie/popular?api_key=").concat(T,"&language=en-US&page=").concat(_+1);fetch(e).then((function(e){return e.json()})).then((function(e){o([].concat(Object(l.a)(i),Object(l.a)(e.results))),S(e.page)}))},children:"Load More"})]})})]})})),y=n(15),_="login_user",S="register_user",w="auth_user";function k(){var e=b.a.get("/api/auth").then((function(e){return e.data}));return console.log("AuthUser",e),{type:w,payload:e}}n(93);var I=Object(s.f)((function(e){var t=Object(y.b)(),n=Object(c.useState)(""),a=Object(j.a)(n,2),i=a[0],o=a[1],r=Object(c.useState)(""),s=Object(j.a)(r,2),l=s[0],u=s[1];return Object(O.jsx)("div",{children:Object(O.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t(function(e){var t=b.a.post("/api/login",e).then((function(e){return e.data}));return console.log("loginUser",t),{type:_,payload:t}}({email:i,password:l})).then((function(t){t.payload.loginSuccess?e.history.push("/"):alert("error")}))},children:[Object(O.jsx)("label",{children:"Email"}),Object(O.jsx)("input",{type:"email",value:i,onChange:function(e){o(e.currentTarget.value)}}),Object(O.jsx)("label",{children:"Password"}),Object(O.jsx)("input",{type:"password",value:l,onChange:function(e){u(e.currentTarget.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{type:"submit",children:"Login"})]})})}));n(94);var E=Object(s.f)((function(e){var t=Object(y.b)(),n=Object(c.useState)(""),a=Object(j.a)(n,2),i=a[0],o=a[1],r=Object(c.useState)(""),s=Object(j.a)(r,2),l=s[0],u=s[1],d=Object(c.useState)(""),h=Object(j.a)(d,2),p=h[0],f=h[1],v=Object(c.useState)(""),g=Object(j.a)(v,2),m=g[0],x=g[1];return Object(O.jsx)("div",{children:Object(O.jsxs)("form",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},onSubmit:function(n){if(n.preventDefault(),p!==m)return alert("incorrect password, try again");t(function(e){var t=b.a.post("/api/register",e).then((function(e){return e.data}));return console.log("registerUser",t),{type:S,payload:t}}({email:i,password:p,name:l})).then((function(t){t.payload.success?e.history.push("/login"):alert("Failed to sign up :/")}))},children:[Object(O.jsx)("label",{children:"Name"}),Object(O.jsx)("input",{type:"text",value:l,onChange:function(e){u(e.currentTarget.value)}}),Object(O.jsx)("label",{children:"Email"}),Object(O.jsx)("input",{type:"email",value:i,onChange:function(e){o(e.currentTarget.value)}}),Object(O.jsx)("label",{children:"Password"}),Object(O.jsx)("input",{type:"password",value:p,onChange:function(e){f(e.currentTarget.value)}}),Object(O.jsx)("label",{children:"ConfirmPassword"}),Object(O.jsx)("input",{type:"password",value:m,onChange:function(e){x(e.currentTarget.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{type:"submit",children:"Register"})]})})})),T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function a(a){var i=Object(y.b)();return Object(c.useEffect)((function(){i(k()).then((function(e){console.log("hoc auth",e),e.payload.isAuth?(n&&!e.payload.isAdmin||!1===t)&&a.history.push("/"):t&&a.history.push("/")}))}),[]),Object(O.jsx)(e,{})}return a},C=n(102);var N=function(e){var t=e.movie,n=e.genre;return Object(O.jsxs)(C.b,{bordered:!0,children:[Object(O.jsx)(C.b.Item,{label:"Title",children:t.title}),Object(O.jsx)(C.b.Item,{label:"Release",children:t.release_date}),Object(O.jsxs)(C.b.Item,{label:"Runtime",children:[t.runtime,"minutes"]}),Object(O.jsxs)(C.b.Item,{label:"Rating",children:[t.vote_average,"/10"]}),Object(O.jsx)(C.b.Item,{label:"Genre",children:n.map((function(e,t){return Object(O.jsxs)("span",{children:[e.name," "]},t)}))})]})};var R=function(e){var t=e.movieId,n=e.movieInfo.title,a=e.movieInfo.backdrop_path,i=e.movieInfo.runtime,o=document.cookie.split("=")[1],r=Object(c.useState)(0),s=Object(j.a)(r,2),l=s[0],u=s[1],d=Object(c.useState)(!1),h=Object(j.a)(d,2),p=h[0],f=h[1],v={theUser:o,movieId:t,movieTitle:n,moviePic:a,movieRuntime:i};return Object(c.useEffect)((function(){b.a.post("/api/fav/fav-num",v).then((function(e){e.data.success?u(e.data.favNum):alert("failed to get your favorite information")})),b.a.post("/api/fav/getFav",{theUser:document.cookie.split("=")[1]}).then((function(e){e.data.success?1==e.data.favorites.length?f(!0):f(!1):alert("failed to get your favorite movies")}))}),[]),Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:function(){o?p?b.a.post("/api/fav/removeFav",v).then((function(e){e.data.success?(f(!p),u(l-1)):alert("failed to add")})):b.a.post("/api/fav/addFav",v).then((function(e){e.data.success?(f(!p),u(l+1)):alert("failed to remove")})):alert("To like this movie, Please Login")},style:{position:"relative",width:"100px",paddingRight:"25px",backgroundColor:"rgb(233, 76, 76)"},children:p?" Liked ".concat(l):"like it?"})})};var U=Object(s.f)((function(e){var t=e.match.params.movieId,n=Object(c.useState)(null),i=Object(j.a)(n,2),o=i[0],r=i[1],s=Object(c.useState)([]),l=Object(j.a)(s,2),u=l[0],f=l[1],m=Object(c.useState)([]),x=Object(j.a)(m,2),y=x[0],_=x[1],S=Object(c.useState)([]),w=Object(j.a)(S,2),k=w[0],I=w[1],E=Object(c.useState)(!1),T=Object(j.a)(E,2),C=T[0],U=T[1];return Object(c.useEffect)((function(){b.a.post("/api/movieapi").then((function(e){var n=e.data,c="".concat(d,"movie/").concat(t,"?api_key=").concat(n,"&language=en-US&page=1");fetch(c).then((function(e){return e.json()})).then((function(e){r(e)}));var a="".concat(d,"movie/").concat(t,"/credits?api_key=").concat(n),i="".concat(d,"movie/").concat(t,"?api_key=").concat(n);fetch(i).then((function(e){return e.json()})).then((function(e){f(e),_(e.genres)})),fetch(a).then((function(e){return e.json()})).then((function(e){I(e.cast)}))}))}),[]),Object(O.jsxs)("div",{children:[o&&Object(O.jsx)(p,{title:o.original_title,rate:o.vote_average,release:o.release_date,desc:o.overview,image:"".concat(h,"w1280").concat(o.backdrop_path)}),Object(O.jsxs)("div",{style:{width:"90%",margin:"0 auto"},children:[Object(O.jsx)("h2",{children:"Movie Info"}),Object(O.jsx)(N,{movie:u,genre:y}),Object(O.jsxs)("div",{className:"btn_box",style:{display:"flex",justifyContent:"center",margin:"15px 0"},children:[Object(O.jsx)("button",{onClick:function(){U(!C)},children:"View Casts"}),Object(O.jsx)(R,{movieInfo:u,movieId:t})]}),C&&Object(O.jsx)(g.a,{gutter:[16,16],children:k&&k.map((function(e,t){return Object(O.jsx)(a.a.Fragment,{children:Object(O.jsx)(v,{image:e.profile_path?"".concat(h,"w500").concat(e.profile_path):"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",name:e.name,character:e.character})},t)}))})]})]})}));var F=Object(s.f)((function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],i=t[1];function o(){b.a.post("/api/fav/getFav",{theUser:document.cookie.split("=")[1]}).then((function(e){e.data.success?i(e.data.favorites):alert("failed to get your favorite movies")}))}return Object(c.useEffect)((function(){o()}),[]),Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Favorite Movies"}),n&&n.map((function(e,t){return Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)("img",{src:"".concat(h,"w400").concat(e.moviePic),alt:e.movieTitle}),Object(O.jsx)("p",{children:e.movieTitle}),Object(O.jsx)("p",{children:e.movieRuntime}),Object(O.jsx)("button",{onClick:function(){return function(e){b.a.post("/api/fav/deleteFav",e).then((function(e){e.data.success?o():alert("failed to get your favorite movies")}))}(e)},children:"Remove"})]},t)}))]})}));var L=function(){return Object(O.jsx)(r.a,{children:Object(O.jsx)("div",{children:Object(O.jsxs)(s.c,{children:[Object(O.jsx)(s.a,{exact:!0,path:"/",component:T(x,null,!0)}),Object(O.jsx)(s.a,{exact:!0,path:"/login",component:T(I,!1)}),Object(O.jsx)(s.a,{exact:!0,path:"/register",component:T(E,!1)}),Object(O.jsx)(s.a,{exact:!0,path:"/movie/:movieId",component:T(U,null)}),Object(O.jsx)(s.a,{exact:!0,path:"/fav",component:T(F,!0)})]})})})},D=(n(95),n(24)),P=n(58),A=n.n(P),G=n(59),M=n(18),V=Object(D.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(M.a)(Object(M.a)({},e),{},{loginSuccess:t.payload});case S:return Object(M.a)(Object(M.a)({},e),{},{register:t.payload});case w:return Object(M.a)(Object(M.a)({},e),{},{userData:t.payload});default:return e}}}),X=V,J=Object(D.a)(A.a,G.a)(D.c);o.a.render(Object(O.jsx)(y.a,{store:J(X,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:Object(O.jsx)(L,{})}),document.getElementById("root"))},66:function(e,t,n){},86:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.2428fd9a.chunk.js.map