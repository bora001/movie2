(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(25),o=c.n(i),r=(c(66),c(16)),s=c(5),l=c(38),j=c(4),u=c(6),b=c.n(u),d=(c(86),"https://api.themoviedb.org/3/"),h="http://image.tmdb.org/t/p/",O="cac7fa95e99a9e497840e60a0c69009e",f=c(1);var v=function(e){return Object(f.jsx)("div",{children:Object(f.jsx)("div",{style:{width:"100%",height:"500px",background:"url('".concat(e.image,"')"),backgroundSize:"100% cover",position:"relative"},children:Object(f.jsxs)("div",{className:"movie_info",style:{position:"absolute",color:"#fff"},children:[Object(f.jsx)("h2",{style:{color:"#fff"},children:e.title}),Object(f.jsx)("p",{children:e.release}),Object(f.jsx)("p",{children:e.rate}),Object(f.jsx)("p",{children:e.desc})]})})})},p=c(104);var m=function(e){return e.landingpage?Object(f.jsx)(p.a,{lg:6,md:8,xs:24,children:Object(f.jsx)("div",{style:{position:"relative"},children:Object(f.jsx)("a",{href:"/movie/".concat(e.movieId),children:Object(f.jsx)("img",{src:e.image,alt:e.title,style:{width:"100%",height:"100%"}})})})}):Object(f.jsx)(p.a,{lg:6,md:8,xs:24,children:Object(f.jsxs)("div",{style:{position:"relative"},children:[Object(f.jsx)("img",{src:e.image,alt:e.title,style:{width:"100%",height:"100%"}}),Object(f.jsx)("p",{children:e.name}),Object(f.jsx)("p",{children:e.character})]})})},g=c(103),x={loginStatus:!1};var y=Object(s.f)((function(e){var t=Object(n.useState)([]),c=Object(j.a)(t,2),i=c[0],o=c[1],r=Object(n.useState)(null),s=Object(j.a)(r,2),u=s[0],p=s[1],y=Object(n.useState)(0),_=Object(j.a)(y,2),S=_[0],w=_[1];Object(n.useEffect)((function(){b.a.get("/api/users/auth").then((function(e){e.data.isAuth?x.loginStatus=!0:x.loginStatus=!1}));var e="".concat(d,"movie/popular?api_key=").concat(O,"&language=en-US&page=1");k(e)}),[]);var k=function(e){fetch(e).then((function(e){return e.json()})).then((function(e){o([].concat(Object(l.a)(i),Object(l.a)(e.results))),p(e.results[0]),w(e.page)}))};return Object(f.jsxs)("div",{className:"landing_page",children:[Object(f.jsxs)("div",{className:"intro_box",children:[Object(f.jsx)("h2",{children:"Thank you for visiting !"}),Object(f.jsx)("div",{className:"btn_box",children:x.loginStatus?Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){b.a.get("/api/users/logout").then((function(t){t.data.success?e.history.push("/login"):alert("failed to logout")}))},children:"LOGOUT"}),Object(f.jsx)("button",{children:Object(f.jsx)("a",{href:"/fav",children:"FAVORITE"})})]}):Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{children:Object(f.jsx)("a",{href:"/register",children:"REGISTER"})}),Object(f.jsx)("button",{children:Object(f.jsx)("a",{href:"/login",children:"LOGIN"})})]})})]}),Object(f.jsx)("div",{className:"movie_box",children:Object(f.jsxs)("div",{className:"latest_movie",children:[u&&Object(f.jsx)(v,{title:u.original_title,rate:u.vote_average,release:u.release_date,desc:u.overview,image:"".concat(h,"w1280").concat(u.backdrop_path)}),Object(f.jsx)("h2",{children:"Moive by Latest"}),Object(f.jsx)(g.a,{gutter:[16,16],children:i&&i.map((function(e,t){return Object(f.jsx)(a.a.Fragment,{children:Object(f.jsx)(m,{landingpage:!0,image:e.poster_path?"".concat(h,"w500").concat(e.poster_path):null,movieId:e.id,title:e.title})},t)}))}),Object(f.jsx)("button",{className:"btn_load",onClick:function(){var e="".concat(d,"movie/popular?api_key=").concat(O,"&language=en-US&page=").concat(S+1);k(e)},children:"Load More"})]})})]})})),_=c(15),S="login_user",w="register_user",k="auth_user";function E(){var e=b.a.get("/api/users/auth").then((function(e){return e.data}));return{type:k,payload:e}}c(93);var I=Object(s.f)((function(e){var t=Object(_.b)(),c=Object(n.useState)(""),a=Object(j.a)(c,2),i=a[0],o=a[1],r=Object(n.useState)(""),s=Object(j.a)(r,2),l=s[0],u=s[1];return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:function(c){c.preventDefault(),t(function(e){var t=b.a.post("/api/users/login",e).then((function(e){return e.data}));return{type:S,payload:t}}({email:i,password:l})).then((function(t){t.payload.loginSuccess?e.history.push("/"):alert("error")}))},children:[Object(f.jsx)("label",{children:"Email"}),Object(f.jsx)("input",{type:"email",value:i,onChange:function(e){o(e.currentTarget.value)}}),Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{type:"password",value:l,onChange:function(e){u(e.currentTarget.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",children:"Login"})]})})}));c(94);var T=Object(s.f)((function(e){var t=Object(_.b)(),c=Object(n.useState)(""),a=Object(j.a)(c,2),i=a[0],o=a[1],r=Object(n.useState)(""),s=Object(j.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(""),h=Object(j.a)(d,2),O=h[0],v=h[1],p=Object(n.useState)(""),m=Object(j.a)(p,2),g=m[0],x=m[1];return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},onSubmit:function(c){if(c.preventDefault(),O!==g)return alert("incorrect password, try again");t(function(e){var t=b.a.post("/api/users/register",e).then((function(e){return e.data}));return{type:w,payload:t}}({email:i,password:O,name:l})).then((function(t){t.payload.success?e.history.push("/login"):alert("Failed to sign up :/")}))},children:[Object(f.jsx)("label",{children:"Name"}),Object(f.jsx)("input",{type:"text",value:l,onChange:function(e){u(e.currentTarget.value)}}),Object(f.jsx)("label",{children:"Email"}),Object(f.jsx)("input",{type:"email",value:i,onChange:function(e){o(e.currentTarget.value)}}),Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{type:"password",value:O,onChange:function(e){v(e.currentTarget.value)}}),Object(f.jsx)("label",{children:"ConfirmPassword"}),Object(f.jsx)("input",{type:"password",value:g,onChange:function(e){x(e.currentTarget.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",children:"Register"})]})})})),C=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function a(a){var i=Object(_.b)();return Object(n.useEffect)((function(){i(E()).then((function(e){console.log(e),e.payload.isAuth?(c&&!e.payload.isAdmin||!1===t)&&a.history.push("/"):t&&a.history.push("/")}))}),[]),Object(f.jsx)(e,{})}return a},N=c(102);var R=function(e){var t=e.movie,c=e.genre;return Object(f.jsxs)(N.b,{bordered:!0,children:[Object(f.jsx)(N.b.item,{label:"Title",children:t.title}),Object(f.jsx)(N.b.item,{label:"Release",children:t.release_date}),Object(f.jsxs)(N.b.item,{label:"Runtime",children:[t.runtime,"minutes"]}),Object(f.jsxs)(N.b.item,{label:"Rating",children:[t.vote_average,"/10"]}),Object(f.jsx)(N.b.item,{label:"Genre",children:c.map((function(e,t){return Object(f.jsxs)("span",{children:[e.name," "]},t)}))})]})};var F=function(e){var t=e.movieId,c=e.movieInfo.title,a=e.movieInfo.backdrop_path,i=e.movieInfo.runtime,o=document.cookie.split("=")[1],r=Object(n.useState)(0),s=Object(j.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(!1),h=Object(j.a)(d,2),O=h[0],v=h[1],p={theUser:o,movieId:t,movieTitle:c,moviePic:a,movieRuntime:i};return Object(n.useEffect)((function(){b.a.post("/api/fav/fav-num",p).then((function(e){e.data.success?(console.log(e.data),u(e.data.favNum)):alert("failed to get your favorite information")})),b.a.post("/api/fav/getFav",{theUser:document.cookie.split("=")[1]}).then((function(e){e.data.success?1==e.data.favorites.length?(console.log("you you did"),v(!0)):v(!1):alert("failed to get your favorite movies")}))}),[]),Object(f.jsx)("div",{children:Object(f.jsx)("button",{onClick:function(){o?O?b.a.post("/api/fav/removeFav",p).then((function(e){e.data.success?(console.log(e.data,"remove"),v(!O),u(l-1)):alert("failed to add")})):b.a.post("/api/fav/addFav",p).then((function(e){e.data.success?(v(!O),u(l+1)):alert("failed to remove")})):alert("To like this movie, Please Login")},style:{position:"relative",width:"100px",paddingRight:"25px",backgroundColor:"rgb(233, 76, 76)"},children:O?" Liked ".concat(l):"like it?"})})};var L=Object(s.f)((function(e){var t=e.match.params.movieId,c=Object(n.useState)(null),i=Object(j.a)(c,2),o=i[0],r=i[1],s="".concat(d,"movie/").concat(t,"?api_key=").concat(O,"&language=en-US&page=1");Object(n.useEffect)((function(){fetch(s).then((function(e){return e.json()})).then((function(e){console.log("mian",e),r(e)}))}),[]);var l=Object(n.useState)([]),u=Object(j.a)(l,2),b=u[0],p=u[1],x=Object(n.useState)([]),y=Object(j.a)(x,2),_=y[0],S=y[1],w=Object(n.useState)([]),k=Object(j.a)(w,2),E=k[0],I=k[1],T=Object(n.useState)(!1),C=Object(j.a)(T,2),N=C[0],L=C[1];return Object(n.useEffect)((function(){var e="".concat(d,"movie/").concat(t,"/credits?api_key=").concat(O),c="".concat(d,"movie/").concat(t,"?api_key=").concat(O);fetch(c).then((function(e){return e.json()})).then((function(e){p(e),S(e.genres)})),fetch(e).then((function(e){return e.json()})).then((function(e){I(e.cast),console.log("crew",e.cast)}))}),[]),Object(f.jsxs)("div",{children:[o&&Object(f.jsx)(v,{title:o.original_title,rate:o.vote_average,release:o.release_date,desc:o.overview,image:"".concat(h,"w1280").concat(o.backdrop_path)}),Object(f.jsxs)("div",{style:{width:"90%",margin:"0 auto"},children:[Object(f.jsx)("h2",{children:"Movie Info"}),Object(f.jsx)(R,{movie:b,genre:_}),Object(f.jsxs)("div",{className:"btn_box",style:{display:"flex",justifyContent:"center",margin:"15px 0"},children:[Object(f.jsx)("button",{onClick:function(){L(!N)},children:"View Casts"}),Object(f.jsx)(F,{movieInfo:b,movieId:t})]}),N&&Object(f.jsx)(g.a,{gutter:[16,16],children:E&&E.map((function(e,t){return Object(f.jsx)(a.a.Fragment,{children:Object(f.jsx)(m,{image:e.profile_path?"".concat(h,"w500").concat(e.profile_path):"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",name:e.name,character:e.character})},t)}))})]})]})}));var U=Object(s.f)((function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],i=t[1];function o(){b.a.post("/api/fav/getFav",{theUser:document.cookie.split("=")[1]}).then((function(e){e.data.success?i(e.data.favorites):alert("failed to get your favorite movies")}))}return Object(n.useEffect)((function(){o()}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Favorite Movies"}),c&&c.map((function(e,t){return Object(f.jsxs)(a.a.Fragment,{children:[Object(f.jsx)("img",{src:"".concat(h,"w400").concat(e.moviePic)}),Object(f.jsx)("p",{children:e.movieTitle}),Object(f.jsx)("p",{children:e.movieRuntime}),Object(f.jsx)("button",{onClick:function(){return function(e){b.a.post("/api/fav/deleteFav",e).then((function(e){e.data.success?o():alert("failed to get your favorite movies")}))}(e)},children:"Remove"})]},t)}))]})}));var D=function(){return Object(f.jsx)(r.a,{children:Object(f.jsx)("div",{children:Object(f.jsxs)(s.c,{children:[Object(f.jsx)(s.a,{exact:!0,path:"/",component:C(y,null,!0)}),Object(f.jsx)(s.a,{exact:!0,path:"/login",component:C(I,!1)}),Object(f.jsx)(s.a,{exact:!0,path:"/register",component:C(T,!1)}),Object(f.jsx)(s.a,{exact:!0,path:"/movie/:movieId",component:C(L,null)}),Object(f.jsx)(s.a,{exact:!0,path:"/fav",component:C(U,!0)})]})})})},P=(c(95),c(24)),A=c(58),G=c.n(A),M=c(59),V=c(18),X=Object(P.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(V.a)(Object(V.a)({},e),{},{loginSuccess:t.payload});case w:return Object(V.a)(Object(V.a)({},e),{},{register:t.payload});case k:return Object(V.a)(Object(V.a)({},e),{},{userData:t.payload});default:return e}}}),J=X,z=Object(P.a)(G.a,M.a)(P.c);o.a.render(Object(f.jsx)(_.a,{store:z(J,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:Object(f.jsx)(D,{})}),document.getElementById("root"))},66:function(e,t,c){},86:function(e,t,c){},93:function(e,t,c){},94:function(e,t,c){}},[[100,1,2]]]);
//# sourceMappingURL=main.f04480c9.chunk.js.map