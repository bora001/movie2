(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{38:function(e,t,n){},58:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(17),r=n.n(c),i=(n(38),n(14)),s=n(3),u=n(10),o=n.n(u),l=(n(58),n(1)),j={loginStatus:!1};var b=Object(s.f)((function(e){return Object(a.useEffect)((function(){o.a.get("/api/users/auth").then((function(e){e.data.isAuth?j.loginStatus=!0:j.loginStatus=!1}))})),Object(l.jsxs)("div",{className:"landing_page",children:[Object(l.jsx)("h2",{children:"Thank you for visiting !"}),Object(l.jsx)("div",{className:"btn_box",children:j.loginStatus?Object(l.jsx)("button",{onClick:function(){o.a.get("/api/users/logout").then((function(t){t.data.success?e.history.push("/login"):alert("failed to logout")}))},children:"LOGOUT"}):Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{children:Object(l.jsx)("a",{href:"/register",children:"REGISTER"})}),Object(l.jsx)("button",{children:Object(l.jsx)("a",{href:"/login",children:"LOGIN"})})]})})]})})),O=n(11),h=n(9),d="login_user",p="register_user",f="auth_user";function g(){var e=o.a.get("/api/users/auth").then((function(e){return e.data}));return{type:f,payload:e}}n(65);var x=Object(s.f)((function(e){var t=Object(h.b)(),n=Object(a.useState)(""),c=Object(O.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)(""),u=Object(O.a)(s,2),j=u[0],b=u[1];return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t(function(e){var t=o.a.post("/api/users/login",e).then((function(e){return e.data}));return{type:d,payload:t}}({email:r,password:j})).then((function(t){t.payload.loginSuccess?e.history.push("/"):alert("error")}))},children:[Object(l.jsx)("label",{children:"Email"}),Object(l.jsx)("input",{type:"email",value:r,onChange:function(e){i(e.currentTarget.value)}}),Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("input",{type:"password",value:j,onChange:function(e){b(e.currentTarget.value)}}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",children:"Login"})]})})}));n(66);var v=Object(s.f)((function(e){var t=Object(h.b)(),n=Object(a.useState)(""),c=Object(O.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)(""),u=Object(O.a)(s,2),j=u[0],b=u[1],d=Object(a.useState)(""),f=Object(O.a)(d,2),g=f[0],x=f[1],v=Object(a.useState)(""),y=Object(O.a)(v,2),m=y[0],S=y[1];return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},onSubmit:function(n){if(n.preventDefault(),g!==m)return alert("incorrect password, try again");t(function(e){var t=o.a.post("/api/users/register",e).then((function(e){return e.data}));return{type:p,payload:t}}({email:r,password:g,name:j})).then((function(t){t.payload.success?e.history.push("/login"):alert("Failed to sign up :/")}))},children:[Object(l.jsx)("label",{children:"Name"}),Object(l.jsx)("input",{type:"text",value:j,onChange:function(e){b(e.currentTarget.value)}}),Object(l.jsx)("label",{children:"Email"}),Object(l.jsx)("input",{type:"email",value:r,onChange:function(e){i(e.currentTarget.value)}}),Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("input",{type:"password",value:g,onChange:function(e){x(e.currentTarget.value)}}),Object(l.jsx)("label",{children:"ConfirmPassword"}),Object(l.jsx)("input",{type:"password",value:m,onChange:function(e){S(e.currentTarget.value)}}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",children:"Register"})]})})})),y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function c(c){var r=Object(h.b)();return Object(a.useEffect)((function(){r(g()).then((function(e){console.log(e),e.payload.isAuth?(n&&!e.payload.isAdmin||!1===t)&&c.history.push("/"):t&&c.history.push("/")}))}),[]),Object(l.jsx)(e,{})}return c};var m=function(){return Object(l.jsx)(i.a,{children:Object(l.jsx)("div",{children:Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{exact:!0,path:"/",component:y(b,null,!0)}),Object(l.jsx)(s.a,{exact:!0,path:"/login",component:y(x,!1)}),Object(l.jsx)(s.a,{exact:!0,path:"/register",component:y(v,!1)})]})})})},S=(n(67),n(16)),w=n(32),_=n.n(w),E=n(33),T=n(12),C=Object(S.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(T.a)(Object(T.a)({},e),{},{loginSuccess:t.payload});case p:return Object(T.a)(Object(T.a)({},e),{},{register:t.payload});case f:return Object(T.a)(Object(T.a)({},e),{},{userData:t.payload});default:return e}}}),D=C,N=Object(S.a)(_.a,E.a)(S.c);r.a.render(Object(l.jsx)(h.a,{store:N(D,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:Object(l.jsx)(m,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.1bdb170a.chunk.js.map